<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="stylesheet" href="/iconfont/iconfont.css"/><link rel="stylesheet" href="/css/valine.css"/><script src="//unpkg.com/valine/dist/Valine.min.js"></script><title>文章详情</title><meta name="next-head-count" content="6"/><link rel="preload" href="/_next/static/css/15b92494358f552df174.css" as="style"/><link rel="stylesheet" href="/_next/static/css/15b92494358f552df174.css"/><link rel="preload" href="/_next/static/css/052ae0a44094706a10c2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/052ae0a44094706a10c2.css"/><link rel="preload" href="/_next/static/css/f0082a2b33ba635f4dd9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f0082a2b33ba635f4dd9.css"/><link rel="preload" href="/_next/static/chunks/main-d5ecf0b3951669ce080c.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1b5fae6dde8a26be77ac.js" as="script"/><link rel="preload" href="/_next/static/chunks/346fcacd.acdc88755e55ded238c8.js" as="script"/><link rel="preload" href="/_next/static/chunks/5b942159a78d3c3cc608ccd4b77e51e0983cab29.ed4d58faabcf26e54f52.js" as="script"/><link rel="preload" href="/_next/static/chunks/08b74a7a597619e1b87151c58acc0528a78ab6f6.c061d003d0886c32baa8.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-176d4174c88ce65d60a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/front/%5Bid%5D-d60ad66e03ab4249afa4.js" as="script"/></head><body><div id="__next"><div class="Header_nav__p_kME"><a class="Header_item__3KWCo" href="/">博客首页</a><a class="Header_item__3KWCo" href="/front">文章列表</a><a class="Header_item__3KWCo" href="/front/logs">更新日志</a><a class="Header_item__3KWCo" href="/front/about">关于</a></div><div class="main"><div class="FrontRoute_container__zQhnm"><div class="FrontRoute_markdown__3G6E8"><h2>生命周期</h2><p>生命周期：组件从诞生到销毁会经历一系列的过程，该过程就叫做生命周期。React在组件的生命周期中提供了一系列钩子函数（类似于事件），可以让开发者在函数中注入代码，这些代码会在合适的时候运行</p><p><strong><em>生命周期仅存在于类组件中，函数组件每次调用都是重新运行函数，旧的组件即刻被销毁</em></strong></p><h3>旧版生命周期 React &lt; 16.0.0</h3><p>constructor：</p><ul><li>同一个组件只会创建一次</li><li>不能在第一次挂载到页面之前调用setState，为了避免问题，构造函数中禁止使用setState</li></ul><p>componentWillMount(<strong>新版已删除</strong>)</p><ul><li>正常情况下，和构造函数一样，它只会运行一次</li><li>可以正常使用setState，但是为了避免bug，不允许使用，因为在某些情况下，该函数会被调用多次</li></ul><p><strong>render</strong></p><ul><li>返回一个虚拟DOM，会被挂在到虚拟DOM树中，最终渲染到页面的真实DOM中</li><li>render可能不止运行一次，只要出发页面重新渲染，就会重新运行</li><li>严禁使用setState，因为可能导致无限递归渲染</li></ul><p><strong>componentDidMount</strong></p><ul><li>创建组件<strong>只会执行一次</strong></li><li>可以使用setState，通常情况下，会将网络请求、启动定时器等一开始需要的操作，书写到该函数中</li></ul><p>--------组件进入活跃状态---------</p><p>componentWillReceiveProps(<strong>新版已删除</strong>)</p><ul><li>属性或状态<strong>重新被赋值</strong>，不一定是改变，就算赋值与之前一样，也会触发</li><li>即将接受新的属性值</li><li>参数为新的属性对象</li><li>该函数可能会导致一些bug，所以不推荐使用</li></ul><p><strong>shouldComponentUpdate</strong></p><ul><li>指示React是否要重新渲染该组件，通过返回true或false来指定（<strong>如果在组件中使用了该函数，那么一定要有返回值：true或者false</strong>）</li><li>默认情况下，会直接返回true</li><li><p>可以加一个判断，前后数据是否一样，如果相同，就直接返回false</p></li></ul><p>componentWillUpdate(<strong>新版已删除</strong>)</p><ul><li>组件即将被重新渲染，在render之前执行</li></ul><p>componentDidUpdate</p><ul><li>往往在该函数中使用dom操作，改变元素</li></ul><p><strong>componentWillUnmount</strong></p><ul><li>通常在该函数中销毁一些组件依赖的资源，如定时器</li></ul><h3>新版生命周期</h3><p>React官方认为，某个数据的来源必须单一</p><p>getDerivedStateFromProps</p><ul><li>通过参数可以获取新的属性和状态</li><li>该函数时静态的</li><li>该函数的返回值会覆盖掉组件状态</li><li>该函数几乎没有什么用</li></ul><p>getSnapshotBeforeUpdate</p><ul><li>真实的DOM构建完成，但还未实际渲染到页面中</li><li>在该函数中，通常用于实现一些附加的dom操作</li><li>该函数的返回值，会作为componentDidUpdate的第三个参数</li></ul></div><hr/><div><div class="FrontRoute_aside__3gFP5"><div class="FrontRouteAside_container__1pfKw"><a class="FrontRouteAside_link__4IF8A FrontRouteAside_left__1-G8B" href="/front/5">上一篇：路由</a><a class="FrontRouteAside_link__4IF8A FrontRouteAside_right__286L6" href="/front/7">下一篇：深入了解 setState</a></div></div><div class="FrontRoute_comments__2cMR7"><div><h2>发表评论</h2><div class="Comment_wrapper__184xV6"></div><h2 id="/front/6" class="leancloud_visitors" data-flag-title="React 生命周期"><i class="iconfont icon-liulan"></i>  <i class="leancloud-visitors-count"></i></h2></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"6","title":"React 生命周期","prev":{"id":5,"title":"路由"},"next":{"id":7,"title":"深入了解 setState"},"md":{"data":"## 生命周期\r\n\r\n生命周期：组件从诞生到销毁会经历一系列的过程，该过程就叫做生命周期。React在组件的生命周期中提供了一系列钩子函数（类似于事件），可以让开发者在函数中注入代码，这些代码会在合适的时候运行\r\n\r\n***生命周期仅存在于类组件中，函数组件每次调用都是重新运行函数，旧的组件即刻被销毁***\r\n\r\n### 旧版生命周期 React \u003c 16.0.0\r\n\r\nconstructor：\r\n   * 同一个组件只会创建一次\r\n   * 不能在第一次挂载到页面之前调用setState，为了避免问题，构造函数中禁止使用setState\r\n\r\ncomponentWillMount(**新版已删除**)\r\n   * 正常情况下，和构造函数一样，它只会运行一次\r\n   * 可以正常使用setState，但是为了避免bug，不允许使用，因为在某些情况下，该函数会被调用多次\r\n\r\n**render**\r\n   * 返回一个虚拟DOM，会被挂在到虚拟DOM树中，最终渲染到页面的真实DOM中\r\n   * render可能不止运行一次，只要出发页面重新渲染，就会重新运行\r\n   * 严禁使用setState，因为可能导致无限递归渲染\r\n\r\n**componentDidMount**\r\n   * 创建组件**只会执行一次**\r\n   * 可以使用setState，通常情况下，会将网络请求、启动定时器等一开始需要的操作，书写到该函数中\r\n\r\n--------组件进入活跃状态---------\r\n\r\ncomponentWillReceiveProps(**新版已删除**)\r\n   * 属性或状态**重新被赋值**，不一定是改变，就算赋值与之前一样，也会触发\r\n   * 即将接受新的属性值\r\n   * 参数为新的属性对象\r\n   * 该函数可能会导致一些bug，所以不推荐使用\r\n\r\n**shouldComponentUpdate**\r\n   * 指示React是否要重新渲染该组件，通过返回true或false来指定（**如果在组件中使用了该函数，那么一定要有返回值：true或者false**）\r\n   * 默认情况下，会直接返回true\r\n   * 可以加一个判断，前后数据是否一样，如果相同，就直接返回false\r\n   \r\ncomponentWillUpdate(**新版已删除**)\r\n   * 组件即将被重新渲染，在render之前执行\r\n\r\ncomponentDidUpdate\r\n   * 往往在该函数中使用dom操作，改变元素\r\n\r\n**componentWillUnmount**\r\n   * 通常在该函数中销毁一些组件依赖的资源，如定时器\r\n\r\n\r\n### 新版生命周期\r\nReact官方认为，某个数据的来源必须单一\r\n\r\ngetDerivedStateFromProps\r\n   * 通过参数可以获取新的属性和状态\r\n   * 该函数时静态的\r\n   * 该函数的返回值会覆盖掉组件状态\r\n   * 该函数几乎没有什么用\r\n\r\ngetSnapshotBeforeUpdate\r\n   * 真实的DOM构建完成，但还未实际渲染到页面中\r\n   * 在该函数中，通常用于实现一些附加的dom操作\r\n   * 该函数的返回值，会作为componentDidUpdate的第三个参数"}},"__N_SSG":true},"page":"/front/[id]","query":{"id":"6"},"buildId":"jB9Y7kPKJdexBq0JD9Xuy","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-c0664c850fd807bc92c2.js"></script><script src="/_next/static/chunks/main-d5ecf0b3951669ce080c.js" async=""></script><script src="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" async=""></script><script src="/_next/static/chunks/framework.1b5fae6dde8a26be77ac.js" async=""></script><script src="/_next/static/chunks/346fcacd.acdc88755e55ded238c8.js" async=""></script><script src="/_next/static/chunks/5b942159a78d3c3cc608ccd4b77e51e0983cab29.ed4d58faabcf26e54f52.js" async=""></script><script src="/_next/static/chunks/08b74a7a597619e1b87151c58acc0528a78ab6f6.c061d003d0886c32baa8.js" async=""></script><script src="/_next/static/chunks/pages/_app-176d4174c88ce65d60a8.js" async=""></script><script src="/_next/static/chunks/pages/front/%5Bid%5D-d60ad66e03ab4249afa4.js" async=""></script><script src="/_next/static/jB9Y7kPKJdexBq0JD9Xuy/_buildManifest.js" async=""></script><script src="/_next/static/jB9Y7kPKJdexBq0JD9Xuy/_ssgManifest.js" async=""></script></body></html>