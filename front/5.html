<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="stylesheet" href="/iconfont/iconfont.css"/><link rel="stylesheet" href="/css/valine.css"/><script src="//unpkg.com/valine/dist/Valine.min.js"></script><title>文章详情</title><meta name="next-head-count" content="6"/><link rel="preload" href="/_next/static/css/15b92494358f552df174.css" as="style"/><link rel="stylesheet" href="/_next/static/css/15b92494358f552df174.css"/><link rel="preload" href="/_next/static/css/052ae0a44094706a10c2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/052ae0a44094706a10c2.css"/><link rel="preload" href="/_next/static/css/f0082a2b33ba635f4dd9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f0082a2b33ba635f4dd9.css"/><link rel="preload" href="/_next/static/chunks/main-d5ecf0b3951669ce080c.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1b5fae6dde8a26be77ac.js" as="script"/><link rel="preload" href="/_next/static/chunks/346fcacd.acdc88755e55ded238c8.js" as="script"/><link rel="preload" href="/_next/static/chunks/5b942159a78d3c3cc608ccd4b77e51e0983cab29.ed4d58faabcf26e54f52.js" as="script"/><link rel="preload" href="/_next/static/chunks/08b74a7a597619e1b87151c58acc0528a78ab6f6.c061d003d0886c32baa8.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-176d4174c88ce65d60a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/front/%5Bid%5D-d60ad66e03ab4249afa4.js" as="script"/></head><body><div id="__next"><div class="Header_nav__p_kME"><a class="Header_item__3KWCo" href="/">博客首页</a><a class="Header_item__3KWCo" href="/front">文章列表</a><a class="Header_item__3KWCo" href="/front/logs">更新日志</a><a class="Header_item__3KWCo" href="/front/about">关于</a></div><div class="main"><div class="FrontRoute_container__zQhnm"><div class="FrontRoute_markdown__3G6E8"><h1>使用路由</h1><p>客户端使用路由的方式跟React中一样</p><p><strong>而服务端需要使用<code>StaticRouter</code>组件</strong>:</p><ul><li>location 是<code>req.path</code>,当前请求的资源路径,用于路由的匹配</li><li>context 传递到组件中是一个<code>staticContext</code>属性,<strong>可以通过它给响应对象通信</strong></li></ul><pre><code class="language-js">&lt;StaticRouter location={location} context={context}&gt;
  &lt;ReactApp /&gt;
&lt;/StaticRouter&gt;</code></pre><h2>使用一个路由配置文件:</h2><pre><code class="language-js">/* routerConfig.js */
import Front from &#x27;@/pages/Front&#x27;
import Home from &#x27;@/pages/Home&#x27;
// ...

export default [
  {
    path: &#x27;/admin&#x27;,
    key: &#x27;adminIndex&#x27;,
    component: Admin,
    routes: [
      {
        path: &#x27;/admin&#x27;,
        key: &#x27;adminHome&#x27;,
        exact: true,
        component: AdminHome,
      }]
  }, 
  {
    path: &#x27;/&#x27;,
    key:&#x27;index&#x27;,
    component: Front,
    routes: [
      {
        key:&#x27;home&#x27;,
        path: &#x27;/&#x27;,
        exact: true,
        component: Home
      }
    ]
  }
]</code></pre><p>key 其实可加可不加,使用了第三方库<code>react-router-config</code>,<strong>会自动加上 key 和 Switch 组件</strong></p><pre><code class="language-js">/* ReactApp.jsx */
import { renderRoutes } from &#x27;react-router-config&#x27;
import routes from &#x27;./routerConfig&#x27;
// ...
export default function ReactApp() {
  return &lt;&gt;{renderRoutes(routes)}&lt;/&gt;
}</code></pre><h2>多级路由</h2><ul><li><p><strong>使用多级路由时,一定要注意<code>&quot;/&quot;</code>路径的以及相关首页的匹配</strong></p></li><li><p>因为<code>react-router-config</code>会自动加上 Switch 组件,<strong>一定要注意<code>exact</code>属性</strong></p></li></ul></div><hr/><div><div class="FrontRoute_aside__3gFP5"><div class="FrontRouteAside_container__1pfKw"><a class="FrontRouteAside_link__4IF8A FrontRouteAside_left__1-G8B" href="/front/4">上一篇：服务端渲染组件 &amp; 客户端渲染组件</a><a class="FrontRouteAside_link__4IF8A FrontRouteAside_right__286L6" href="/front/6">下一篇：React 生命周期</a></div></div><div class="FrontRoute_comments__2cMR7"><div><h2>发表评论</h2><div class="Comment_wrapper__184xV5"></div><h2 id="/front/5" class="leancloud_visitors" data-flag-title="路由"><i class="iconfont icon-liulan"></i>  <i class="leancloud-visitors-count"></i></h2></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"5","title":"路由","prev":{"id":4,"title":"服务端渲染组件 \u0026 客户端渲染组件"},"next":{"id":6,"title":"React 生命周期"},"md":{"data":"# 使用路由\r\n\r\n客户端使用路由的方式跟React中一样\r\n\r\n**而服务端需要使用```StaticRouter```组件**:\r\n- location 是```req.path```,当前请求的资源路径,用于路由的匹配\r\n- context 传递到组件中是一个```staticContext```属性,**可以通过它给响应对象通信**\r\n\r\n```js\r\n\u003cStaticRouter location={location} context={context}\u003e\r\n  \u003cReactApp /\u003e\r\n\u003c/StaticRouter\u003e\r\n```\r\n\r\n## 使用一个路由配置文件:\r\n\r\n```js\r\n/* routerConfig.js */\r\nimport Front from '@/pages/Front'\r\nimport Home from '@/pages/Home'\r\n// ...\r\n\r\nexport default [\r\n  {\r\n    path: '/admin',\r\n    key: 'adminIndex',\r\n    component: Admin,\r\n    routes: [\r\n      {\r\n        path: '/admin',\r\n        key: 'adminHome',\r\n        exact: true,\r\n        component: AdminHome,\r\n      }]\r\n  }, \r\n  {\r\n    path: '/',\r\n    key:'index',\r\n    component: Front,\r\n    routes: [\r\n      {\r\n        key:'home',\r\n        path: '/',\r\n        exact: true,\r\n        component: Home\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nkey 其实可加可不加,使用了第三方库```react-router-config```,**会自动加上 key 和 Switch 组件**\r\n\r\n```js\r\n/* ReactApp.jsx */\r\nimport { renderRoutes } from 'react-router-config'\r\nimport routes from './routerConfig'\r\n// ...\r\nexport default function ReactApp() {\r\n  return \u003c\u003e{renderRoutes(routes)}\u003c/\u003e\r\n}\r\n```\r\n\r\n## 多级路由\r\n- **使用多级路由时,一定要注意```\"/\"```路径的以及相关首页的匹配**\r\n\r\n- 因为```react-router-config```会自动加上 Switch 组件,**一定要注意```exact```属性**"}},"__N_SSG":true},"page":"/front/[id]","query":{"id":"5"},"buildId":"jB9Y7kPKJdexBq0JD9Xuy","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-c0664c850fd807bc92c2.js"></script><script src="/_next/static/chunks/main-d5ecf0b3951669ce080c.js" async=""></script><script src="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" async=""></script><script src="/_next/static/chunks/framework.1b5fae6dde8a26be77ac.js" async=""></script><script src="/_next/static/chunks/346fcacd.acdc88755e55ded238c8.js" async=""></script><script src="/_next/static/chunks/5b942159a78d3c3cc608ccd4b77e51e0983cab29.ed4d58faabcf26e54f52.js" async=""></script><script src="/_next/static/chunks/08b74a7a597619e1b87151c58acc0528a78ab6f6.c061d003d0886c32baa8.js" async=""></script><script src="/_next/static/chunks/pages/_app-176d4174c88ce65d60a8.js" async=""></script><script src="/_next/static/chunks/pages/front/%5Bid%5D-d60ad66e03ab4249afa4.js" async=""></script><script src="/_next/static/jB9Y7kPKJdexBq0JD9Xuy/_buildManifest.js" async=""></script><script src="/_next/static/jB9Y7kPKJdexBq0JD9Xuy/_ssgManifest.js" async=""></script></body></html>